# ADR-005: Security Architecture

## Title
Security Architecture: Credential Storage, Secure Boot, Access Control

## Status
Proposed

## Context
The device must comply with Matter/Thread security standards, protect credentials, and prevent unauthorized access. ESP32-C6 supports NVS encryption, secure boot, and flash encryption.

## Alternatives
### Alternative 1: Plain Storage, No Secure Boot
- Store credentials in plain NVS
- No secure boot or flash encryption
- Pros: Simple, minimal setup
- Cons: Vulnerable to attacks, non-compliant

### Alternative 2: Encrypted Storage, Secure Boot, Access Control (Recommended)
- Use NVS encryption for credentials
- Enable secure boot and flash encryption
- Implement role-based access control for configuration and commissioning
- Pros: Strong security, compliance, protects user data
- Cons: More complex setup, requires careful key management

### Alternative 3: External Secure Element
- Use external chip for credential storage
- Pros: Highest security
- Cons: Increased BOM cost, design complexity

## Decision
Alternative 2: Use ESP-IDF NVS encryption, enable secure boot and flash encryption, and implement role-based access control for configuration and commissioning.

## Consequences
- Strong security and compliance
- Increased setup and documentation effort
- Requires secure key management and recovery procedures

## References
- [ESP-IDF Security documentation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/security/index.html)
- [architecture.md](../../architecture.md)
