# ADR-007: Firmware Update and Configuration Management

## Title
Firmware Update and Configuration Management Strategy

## Status
Proposed

## Context
The device must support reliable firmware updates and configuration management. OTA updates are not supported; updates are performed via physical programming pins. Configuration must be resettable and securely stored.

## Alternatives
### Alternative 1: Physical Flashing Only (Recommended)
- Firmware updates via programming pins
- Configuration stored in encrypted NVS
- Reset via setup button
- Pros: Simple, secure, no network risk
- Cons: No remote updates, requires physical access

### Alternative 2: OTA Updates
- Support OTA via Wi-Fi/Thread
- Pros: Convenient, remote updates
- Cons: Increased attack surface, more complex

### Alternative 3: Hybrid
- Physical flashing for major updates, OTA for minor
- Pros: Flexibility
- Cons: Complexity, security concerns

## Decision
Alternative 1: Use physical flashing for firmware updates and encrypted NVS for configuration. Provide reset via setup button.

## Consequences
- Secure and simple update process
- No remote update risk
- Requires physical access for updates

## References
- [ESP-IDF NVS documentation](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/storage/nvs_flash.html)
- [architecture.md](../../architecture.md)
