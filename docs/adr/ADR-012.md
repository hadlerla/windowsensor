# ADR-012: Compile-Time Configuration via ESP-IDF Kconfig

## Title
Compile-Time Configuration of Hardware Pins and Default Parameters

## Status
Proposed

## Context
The firmware must support flexible hardware adaptation and secure default parameter management for production and development devices. ESP32-based designs often require configurable pin assignments and default values (e.g., WiFi SSID, password) that vary by hardware revision or deployment scenario. Runtime configuration is not permitted for these parameters in this project.

## Alternatives
### Alternative 1: ESP-IDF Kconfig (Recommended)
- Define all configurable hardware pins and default parameters in Kconfig files.
- Set values at compile time via `menuconfig` or `sdkconfig.defaults`.
- Access parameters in code via `sdkconfig.h` macros (e.g., `CONFIG_AP_MODE_GPIO`, `CONFIG_DEFAULT_WIFI_SSID`).
- Pros: Standard ESP-IDF practice, easy to document, supports defaults and overrides, robust for CI/CD and production.
- Cons: Requires build-time knowledge of hardware, not changeable at runtime.

### Alternative 2: Hardcoded Values in Source Code
- Define pins and parameters directly in source files or headers.
- Pros: Simple for small projects.
- Cons: Not flexible, error-prone, hard to maintain across hardware revisions.

### Alternative 3: External Configuration Files (Runtime)
- Store parameters in files (e.g., JSON, CSV) on device flash.
- Pros: Runtime flexibility.
- Cons: Not permitted for this project, increased complexity and risk.

## Decision
Adopt Alternative 1: Use ESP-IDF Kconfig for all compile-time configuration of hardware pins and default parameters. All such options must be defined in Kconfig files and referenced in code via `sdkconfig.h` macros. This applies to:
- AP mode activation pin
- Default WiFi SSID and password
- Any other hardware or software parameter requiring compile-time flexibility

## Consequences
- All hardware and default parameters are managed consistently and securely
- Easy adaptation for production hardware changes
- Documentation and configuration are standardized
- No runtime changes to these parameters

## References
- [ESP-IDF Kconfig Guide](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/kconfig.html)
- [architecture.md](../../architecture.md)
- [CONTRIBUTING.md](../../CONTRIBUTING.md)
